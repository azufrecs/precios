name: ðŸ“± Notificaciones Telegram
on: [push]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Analizar commit
        id: analyze
        run: |
          echo "SHORT_SHA=${GITHUB_SHA:0:7}" >> $GITHUB_OUTPUT
          COMMIT_MSG="${{ github.event.head_commit.message }}"
          if echo "$COMMIT_MSG" | grep -qi "feat"; then
            echo "ICON=âœ¨" >> $GITHUB_OUTPUT
            echo "TIPO=Nueva Funcionalidad" >> $GITHUB_OUTPUT
          elif echo "$COMMIT_MSG" | grep -qi "fix\|bug"; then
            echo "ICON=ðŸ›" >> $GITHUB_OUTPUT
            echo "TIPO=CorrecciÃ³n" >> $GITHUB_OUTPUT
          elif echo "$COMMIT_MSG" | grep -qi "doc"; then
            echo "ICON=ðŸ“š" >> $GITHUB_OUTPUT
            echo "TIPO=DocumentaciÃ³n" >> $GITHUB_OUTPUT
          elif echo "$COMMIT_MSG" | grep -qi "refactor"; then
            echo "ICON=ðŸ”§" >> $GITHUB_OUTPUT
            echo "TIPO=RefactorizaciÃ³n" >> $GITHUB_OUTPUT
          else
            echo "ICON=ðŸ“Œ" >> $GITHUB_OUTPUT
            echo "TIPO=General" >> $GITHUB_OUTPUT
          fi
          
      - uses: appleboy/telegram-action@v0.1.0
        with:
          to: "1119828821"
          token: "8485125097:AAEb2vohfPzM5hJmYnhm8XElBvkCXqtwLSs"
          message: |
            ${{ steps.analyze.outputs.ICON }} ${{ steps.analyze.outputs.TIPO }}
            
            ðŸ“‚ Repositorio: ${{ github.repository }}
            ðŸ‘¤ Autor: ${{ github.actor }}
            
            ðŸ’­ Mensaje:
            ${{ github.event.head_commit.message }}
            
            ðŸ”§ Detalles:
            â€¢ Hash: ${{ steps.analyze.outputs.SHORT_SHA }}
            â€¢ Rama: ${{ github.ref_name }}
            
            ðŸ”— Ver cambios:
            ${{ github.event.head_commit.url }}
